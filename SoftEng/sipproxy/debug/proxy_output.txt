DEBUG properties set!
The proxy is responsible for the domain:192.168.1.2
Here is one domain to take care of:there.com
Here is one domain to take care of:pingtel.com
Here is one domain to take care of:ubi.com
Here is one domain to take care of:hotmail.com
Here is one domain to take care of:nist.gov
Here is one domain to take care of:nitrogen.epact.se
Here is one domain to take care of:192.168.1.2
DEBUG, ProxyRouter, the default route is: null
We don't export the registrations because RMI is disabled.
Parsing the XML registrations file: ./gov/nist/sip/proxy/configuration/registrations.xml
Parsing XML registrations
XML Registrations parsed successfully!!!
Registrar, parseXMLregistrations(), Uploading of 2 registrations
RegistrationsTable, addRegistration(), registration  added for the key: sip:mranga@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:mranga@nist.gov
   DisplayName=Ranga 
   Contacts=[]
RegistrationsTable, addRegistration(), registration  added for the key: sip:deruelle@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:deruelle@nist.gov
   DisplayName=Deruelle 
   Contacts=[]
Registrar, registerToProxies(), we have to register to 0 proxies

*****************************************************


****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: e02497e632d080f4a8fe7ec928be8cfb@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>;tag=21960496
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK2d1815cd2b7ab0a573af42be5899a373
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 35

SIGNUP mrsk7:Mike:Rozis:123:Premium
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: fae2984486af3d45ea8d3fa770bd2380@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>;tag=21960496
To: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK5fb1b64e279522213c0735ce6121e6a4
Max-Forwards: 70
Pwd: 123
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "null"
Registrar, processRegister(), key is null 400 INVALID REQUEST replied
PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: fae2984486af3d45ea8d3fa770bd2380@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>;tag=21960496
To: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK5fb1b64e279522213c0735ce6121e6a4
Max-Forwards: 70
Pwd: 123
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:mrsk7@192.168.1.2:4000

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: ade07065309c0e3c6b48c79947e30fdb@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=30332036
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK10b130335af56be341e5e52b98105f79
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 25

SIGNUP Mike:::Rozis:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: a3a0e1500cae84baf29b5a7c2a1a8f20@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=30332036
To: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK01ad4e0a2609800523968cdd622d43b3
Max-Forwards: 70
Pwd: Rozis
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "null"
Registrar, processRegister(), key is null 400 INVALID REQUEST replied
PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: a3a0e1500cae84baf29b5a7c2a1a8f20@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=30332036
To: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK01ad4e0a2609800523968cdd622d43b3
Max-Forwards: 70
Pwd: Rozis
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:Mike@192.168.1.2:4000
Proxy Clean up

*****************************************************

Stopping the proxy
Proxy stopped

*****************************************************

DEBUG properties set!
The proxy is responsible for the domain:192.168.1.2
Here is one domain to take care of:there.com
Here is one domain to take care of:pingtel.com
Here is one domain to take care of:ubi.com
Here is one domain to take care of:hotmail.com
Here is one domain to take care of:nist.gov
Here is one domain to take care of:nitrogen.epact.se
Here is one domain to take care of:192.168.1.2
DEBUG, ProxyRouter, the default route is: null
We don't export the registrations because RMI is disabled.
Parsing the XML registrations file: ./gov/nist/sip/proxy/configuration/registrations.xml
Parsing XML registrations
XML Registrations parsed successfully!!!
Registrar, parseXMLregistrations(), Uploading of 2 registrations
RegistrationsTable, addRegistration(), registration  added for the key: sip:mranga@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:mranga@nist.gov
   DisplayName=Ranga 
   Contacts=[]
RegistrationsTable, addRegistration(), registration  added for the key: sip:deruelle@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:deruelle@nist.gov
   DisplayName=Deruelle 
   Contacts=[]
Registrar, registerToProxies(), we have to register to 0 proxies

*****************************************************


****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 35cc11399e4c6e4325191fc3d17eef88@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=12622145
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK08df76fcfaa892919acfa4ce120c6015
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 23

SIGNUP Mike:::B:Premium
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 22b0a2ce939c29ce223d518059a06889@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=12622145
To: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKac1b9452ea8e0c76899613d00053f617
Max-Forwards: 70
Pwd: B
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:mike@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:mike@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.2:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:mike@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:mike@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: 22b0a2ce939c29ce223d518059a06889@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=12622145
To: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKac1b9452ea8e0c76899613d00053f617
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 22b0a2ce939c29ce223d518059a06889@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=12622145
To: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKac1b9452ea8e0c76899613d00053f617
Max-Forwards: 70
Pwd: B
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:Mike@192.168.1.2:4000
DEBUG properties set!
The proxy is responsible for the domain:192.168.1.2
Here is one domain to take care of:there.com
Here is one domain to take care of:pingtel.com
Here is one domain to take care of:ubi.com
Here is one domain to take care of:hotmail.com
Here is one domain to take care of:nist.gov
Here is one domain to take care of:nitrogen.epact.se
Here is one domain to take care of:192.168.1.2
DEBUG, ProxyRouter, the default route is: null
ERROR: listening point not created 
ERROR: listening point not created 
We don't export the registrations because RMI is disabled.
Parsing the XML registrations file: ./gov/nist/sip/proxy/configuration/registrations.xml
Parsing XML registrations
XML Registrations parsed successfully!!!
Registrar, parseXMLregistrations(), Uploading of 2 registrations
RegistrationsTable, addRegistration(), registration  added for the key: sip:mranga@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:mranga@nist.gov
   DisplayName=Ranga 
   Contacts=[]
RegistrationsTable, addRegistration(), registration  added for the key: sip:deruelle@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:deruelle@nist.gov
   DisplayName=Deruelle 
   Contacts=[]
Registrar, registerToProxies(), we have to register to 0 proxies

*****************************************************

Proxy Clean up

*****************************************************

Stopping the proxy
Proxy Clean up

*****************************************************

Stopping the proxy
Proxy stopped

*****************************************************

Proxy stopped

*****************************************************

DEBUG properties set!
The proxy is responsible for the domain:192.168.1.2
Here is one domain to take care of:there.com
Here is one domain to take care of:pingtel.com
Here is one domain to take care of:ubi.com
Here is one domain to take care of:hotmail.com
Here is one domain to take care of:nist.gov
Here is one domain to take care of:nitrogen.epact.se
Here is one domain to take care of:192.168.1.2
DEBUG, ProxyRouter, the default route is: null
We don't export the registrations because RMI is disabled.
Parsing the XML registrations file: ./gov/nist/sip/proxy/configuration/registrations.xml
Parsing XML registrations
XML Registrations parsed successfully!!!
Registrar, parseXMLregistrations(), Uploading of 2 registrations
RegistrationsTable, addRegistration(), registration  added for the key: sip:mranga@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:mranga@nist.gov
   DisplayName=Ranga 
   Contacts=[]
RegistrationsTable, addRegistration(), registration  added for the key: sip:deruelle@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:deruelle@nist.gov
   DisplayName=Deruelle 
   Contacts=[]
Registrar, registerToProxies(), we have to register to 0 proxies

*****************************************************


****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: d9aa25a8d1580fd64da3065e9148b036@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK3c1048a9eaee7081b4fae2687fc4ac9a
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 32

SIGNUP Mike:Mike:Rozis:1:Premium
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: cf2465880428b963c07021828efeb1e1@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK42b51c4255da48d1a8d8dab43ab7a451
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:mike@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:mike@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.2:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:mike@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:mike@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: cf2465880428b963c07021828efeb1e1@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK42b51c4255da48d1a8d8dab43ab7a451
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: cf2465880428b963c07021828efeb1e1@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK42b51c4255da48d1a8d8dab43ab7a451
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:Mike@192.168.1.2:4000

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 09d748474b5b7dc91cb3a26ed5342b51@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:Nikos@192.168.1.2:4000;transport=udp>;tag=33502040
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:24102;branch=z9hG4bK6a71799e0f26400200e8c54c97198467
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 34

SIGNUP Nikos:Nick:Terlemes:2:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 1c8e89e230d855248ddb37eb3a46ab34@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Nikos@192.168.1.2:4000;transport=udp>;tag=33502040
To: "KLOUP" <sip:Nikos@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:24102;branch=z9hG4bK2c307e16b4e23863eadbf669b508665b
Max-Forwards: 70
Pwd: 2
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:24102;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:nikos@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:nikos@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.2:24102 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:nikos@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:mike@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

registered user: "sip:nikos@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:24102;transport=udp>;expires=3600

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: 1c8e89e230d855248ddb37eb3a46ab34@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Nikos@192.168.1.2:4000;transport=udp>;tag=33502040
To: "KLOUP" <sip:Nikos@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:24102;branch=z9hG4bK2c307e16b4e23863eadbf669b508665b
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:24102;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 1c8e89e230d855248ddb37eb3a46ab34@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Nikos@192.168.1.2:4000;transport=udp>;tag=33502040
To: "KLOUP" <sip:Nikos@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:24102;branch=z9hG4bK2c307e16b4e23863eadbf669b508665b
Max-Forwards: 70
Pwd: 2
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:24102;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:Nikos@192.168.1.2:4000

****************************************************
Request INVITE received:
INVITE sip:Nikos@192.168.1.2:4000 SIP/2.0
Call-ID: 4563f6180e5d9ef71f45f3a5bb7ae03f@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: <sip:Nikos@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKbb23a0e100e864b3669f933eba0676f1
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:nikos@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (No routes detected)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@1d7cc2c5
dialog =  gov.nist.javax.sip.stack.SIPDialog@1850507
RequestForwarding, forwardRequestStatefully(), the dialog state is null, so we have to forward the request using a new clientTransaction
ProxyRouter: request:
INVITE sip:192.168.1.2:24102 SIP/2.0
Call-ID: 4563f6180e5d9ef71f45f3a5bb7ae03f@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: <sip:Nikos@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKf2d1c1926c94b05d5de684d7d821baeb,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKbb23a0e100e864b3669f933eba0676f1
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

DEBUG, ProxyRouter, getNextHops(),  the hop added: host:192.168.1.2 port:24102 transport:udp
RequestForwarding, forwardRequestStatefully(),, cloned request forwarded statefully:
 INVITE sip:192.168.1.2:24102 SIP/2.0
Call-ID: 4563f6180e5d9ef71f45f3a5bb7ae03f@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: <sip:Nikos@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK235cdbb88973f1c125b4bd579d1b9938,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKbb23a0e100e864b3669f933eba0676f1
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31


***************************************************************
***************************************************************
Response 100 Trying received:
SIP/2.0 100 Trying
Call-ID: 4563f6180e5d9ef71f45f3a5bb7ae03f@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: <sip:Nikos@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK235cdbb88973f1c125b4bd579d1b9938,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKbb23a0e100e864b3669f933eba0676f1
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@a312fd2
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1044f78
ResponseForwarding, forwardResponse() (STEP 5) don't forward the 100 Trying.

***************************************************************
***************************************************************
Response 180 Ringing received:
SIP/2.0 180 Ringing
Call-ID: 4563f6180e5d9ef71f45f3a5bb7ae03f@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: <sip:Nikos@192.168.1.2:4000>;tag=31018112
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK235cdbb88973f1c125b4bd579d1b9938,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKbb23a0e100e864b3669f933eba0676f1
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@a312fd2
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1044f78
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 180 Ringing
Call-ID: 4563f6180e5d9ef71f45f3a5bb7ae03f@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: <sip:Nikos@192.168.1.2:4000>;tag=31018112
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKbb23a0e100e864b3669f933eba0676f1
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



***************************************************************
***************************************************************
Response 200 OK received:
SIP/2.0 200 OK
Call-ID: 4563f6180e5d9ef71f45f3a5bb7ae03f@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: <sip:Nikos@192.168.1.2:4000>;tag=31018112
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK235cdbb88973f1c125b4bd579d1b9938,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKbb23a0e100e864b3669f933eba0676f1
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.2:24102;transport=udp>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@a312fd2
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1044f78
ResponseForwarding, forwardResponse()  (STEP 9), we changed the toTag:31018112
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 200 OK
Call-ID: 4563f6180e5d9ef71f45f3a5bb7ae03f@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: <sip:Nikos@192.168.1.2:4000>;tag=31018112
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKbb23a0e100e864b3669f933eba0676f1
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.2:24102;transport=udp>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31


****************************************************
Request ACK received:
ACK sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: 4563f6180e5d9ef71f45f3a5bb7ae03f@192.168.1.2
CSeq: 1 ACK
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: <sip:Nikos@192.168.1.2:4000>;tag=31018112
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=3139322e3136382e312e323a3530363
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.2:24102;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@1b912b92
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1850507
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received ACK not targeted for proxy
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:nikos@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (the route has no lr parameter)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
RequestForwarding, forwardRequest(), no Content-Type header, we don't stripe any parameters!!!
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@1b912b92
dialog =  gov.nist.javax.sip.stack.SIPDialog@1850507
Dialog checked.
Printing TransactionsMappingTable...
***********************************************
this = gov.nist.sip.proxy.TransactionsMapping@113cefe
TRANSACTIONS TABLE: 
- serverTransaction: gov.nist.javax.sip.stack.SIPServerTransaction@1d7cc2c5
   - state: Terminated Transaction
   - dialog: gov.nist.javax.sip.stack.SIPDialog@1850507
   - dialog state: Confirmed Dialog
   - its clientTransaction: gov.nist.javax.sip.stack.SIPClientTransaction@a312fd2, state: Terminated Transaction
********************************************

Getting peer dialog...
RequestForwarding, forwardRequestStatefully(), cloned ACK forwarded statefully  (using the dialog from the first client transaction):
 ACK sip:192.168.1.2:24102 SIP/2.0
Call-ID: 4563f6180e5d9ef71f45f3a5bb7ae03f@192.168.1.2
CSeq: 1 ACK
From: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
To: <sip:Nikos@192.168.1.2:4000>;tag=31018112
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKf2f066775ad0c88d10b390df10fed615,SIP/2.0/UDP 192.168.1.2:5060;branch=3139322e3136382e312e323a3530363
Max-Forwards: 69
Route: "KLOUP" <sip:192.168.1.2:24102;transport=udp>
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



****************************************************
Request BYE received:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: 4563f6180e5d9ef71f45f3a5bb7ae03f@192.168.1.2
CSeq: 1 BYE
To: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>;tag=20829676
From: <sip:Nikos@192.168.1.2:4000>;tag=31018112
Max-Forwards: 69
Via: SIP/2.0/UDP 192.168.1.2:24102;branch=z9hG4bKc377d4e38c41664684d61f8b42eb3340
Route: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@baca5ffb
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1044f78
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received BYE
ProxyRouter: request:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: 4563f6180e5d9ef71f45f3a5bb7ae03f@192.168.1.2
CSeq: 1 BYE
To: "KLOUP" <sip:Mike@192.168.1.2:4000;transport=udp>
From: <sip:Nikos@192.168.1.2:4000>
Max-Forwards: 69
Via: SIP/2.0/UDP 192.168.1.2:4000,SIP/2.0/UDP 192.168.1.2:24102;branch=z9hG4bKc377d4e38c41664684d61f8b42eb3340
Route: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG, ProxyRouter, getNextHop(), The request has at least one route, we use the first one: 192.168.1.2:5060/udp
TimeoutEvent received
ERROR, Unable to retrieve the server transaction, cannot process timeout!
Proxy Clean up

*****************************************************

Stopping the proxy
Proxy stopped

*****************************************************

DEBUG properties set!
The proxy is responsible for the domain:192.168.1.2
Here is one domain to take care of:there.com
Here is one domain to take care of:pingtel.com
Here is one domain to take care of:ubi.com
Here is one domain to take care of:hotmail.com
Here is one domain to take care of:nist.gov
Here is one domain to take care of:nitrogen.epact.se
Here is one domain to take care of:192.168.1.2
DEBUG, ProxyRouter, the default route is: null
We don't export the registrations because RMI is disabled.
Parsing the XML registrations file: ./gov/nist/sip/proxy/configuration/registrations.xml
Parsing XML registrations
XML Registrations parsed successfully!!!
Registrar, parseXMLregistrations(), Uploading of 2 registrations
RegistrationsTable, addRegistration(), registration  added for the key: sip:mranga@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:mranga@nist.gov
   DisplayName=Ranga 
   Contacts=[]
RegistrationsTable, addRegistration(), registration  added for the key: sip:deruelle@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:deruelle@nist.gov
   DisplayName=Deruelle 
   Contacts=[]
Registrar, registerToProxies(), we have to register to 0 proxies

*****************************************************


****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 6dd49337ce73c0b44f8e014ad1cb4819@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKbf23a3ed26ed108aea4dda3d11bac56a
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 32

SIGNUP Mixalis:123:123:123:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: e1256c26d3a6dbf8861d270e079de8c6@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKf1f34e2a2398c59b81823ed3925038a1
Max-Forwards: 70
Pwd: 123
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:mixalis@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:mixalis@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.2:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:mixalis@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:mixalis@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: e1256c26d3a6dbf8861d270e079de8c6@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKf1f34e2a2398c59b81823ed3925038a1
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: e1256c26d3a6dbf8861d270e079de8c6@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKf1f34e2a2398c59b81823ed3925038a1
Max-Forwards: 70
Pwd: 123
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:Mixalis@192.168.1.2:4000

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 92dabd7b980da5fcce6606d5ff8b60bb@192.168.1.4
CSeq: 1 MESSAGE
From: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>;tag=22505839
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK7548c09a9e68789af62065c0e0a2455b
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 32

SIGNUP Takeo:123:123:123:Premium
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: c198631b5cecbaa8014716bbd5eab2a8@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>;tag=22505839
To: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK0d1d8591f93cb8bf875cfdadd94336ce
Max-Forwards: 70
Pwd: 123
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:takeo@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:takeo@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.4:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:takeo@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:mixalis@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

registered user: "sip:takeo@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>;expires=3600

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: c198631b5cecbaa8014716bbd5eab2a8@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>;tag=22505839
To: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK0d1d8591f93cb8bf875cfdadd94336ce
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: c198631b5cecbaa8014716bbd5eab2a8@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>;tag=22505839
To: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK0d1d8591f93cb8bf875cfdadd94336ce
Max-Forwards: 70
Pwd: 123
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:Takeo@192.168.1.2:4000

****************************************************
Request INVITE received:
INVITE sip:Takeo@192.168.1.2:4000 SIP/2.0
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:Takeo@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKe060d308db4f2b990261a7baf3d8db3c
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:takeo@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (No routes detected)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@a0eb8b5c
dialog =  gov.nist.javax.sip.stack.SIPDialog@ff8399
RequestForwarding, forwardRequestStatefully(), the dialog state is null, so we have to forward the request using a new clientTransaction
ProxyRouter: request:
INVITE sip:192.168.1.4:5060 SIP/2.0
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:Takeo@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK94b6b0930751e68898801329ca734b35,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKe060d308db4f2b990261a7baf3d8db3c
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

DEBUG, ProxyRouter, getNextHops(),  the hop added: host:192.168.1.4 port:5060 transport:udp
RequestForwarding, forwardRequestStatefully(),, cloned request forwarded statefully:
 INVITE sip:192.168.1.4:5060 SIP/2.0
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:Takeo@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK461d3c8d58ccd25ae4cfefcc1aae0dc2,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKe060d308db4f2b990261a7baf3d8db3c
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31


***************************************************************
***************************************************************
Response 100 Trying received:
SIP/2.0 100 Trying
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:Takeo@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK461d3c8d58ccd25ae4cfefcc1aae0dc2,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKe060d308db4f2b990261a7baf3d8db3c
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@392af917
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@f997aa
ResponseForwarding, forwardResponse() (STEP 5) don't forward the 100 Trying.

***************************************************************
***************************************************************
Response 180 Ringing received:
SIP/2.0 180 Ringing
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:Takeo@192.168.1.2:4000>;tag=31816475
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK461d3c8d58ccd25ae4cfefcc1aae0dc2,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKe060d308db4f2b990261a7baf3d8db3c
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@392af917
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@f997aa
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 180 Ringing
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:Takeo@192.168.1.2:4000>;tag=31816475
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKe060d308db4f2b990261a7baf3d8db3c
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



***************************************************************
***************************************************************
Response 200 OK received:
SIP/2.0 200 OK
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:Takeo@192.168.1.2:4000>;tag=31816475
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK461d3c8d58ccd25ae4cfefcc1aae0dc2,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKe060d308db4f2b990261a7baf3d8db3c
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 157

v=0
o=George 0 0 IN IP4 192.168.1.4
s=-
c=IN IP4 192.168.1.4
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31
a=recvonly

Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@392af917
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@f997aa
ResponseForwarding, forwardResponse()  (STEP 9), we changed the toTag:31816475
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 200 OK
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:Takeo@192.168.1.2:4000>;tag=31816475
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKe060d308db4f2b990261a7baf3d8db3c
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 157

v=0
o=George 0 0 IN IP4 192.168.1.4
s=-
c=IN IP4 192.168.1.4
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31
a=recvonly


****************************************************
Request ACK received:
ACK sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 1 ACK
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:Takeo@192.168.1.2:4000>;tag=31816475
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=3139322e3136382e312e323a3530363
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@919fc8d1
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@ff8399
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received ACK not targeted for proxy
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:takeo@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (the route has no lr parameter)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
RequestForwarding, forwardRequest(), no Content-Type header, we don't stripe any parameters!!!
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@919fc8d1
dialog =  gov.nist.javax.sip.stack.SIPDialog@ff8399
Dialog checked.
Printing TransactionsMappingTable...
***********************************************
this = gov.nist.sip.proxy.TransactionsMapping@9fa55
TRANSACTIONS TABLE: 
- serverTransaction: gov.nist.javax.sip.stack.SIPServerTransaction@a0eb8b5c
   - state: Terminated Transaction
   - dialog: gov.nist.javax.sip.stack.SIPDialog@ff8399
   - dialog state: Confirmed Dialog
   - its clientTransaction: gov.nist.javax.sip.stack.SIPClientTransaction@392af917, state: Terminated Transaction
********************************************

Getting peer dialog...
RequestForwarding, forwardRequestStatefully(), cloned ACK forwarded statefully  (using the dialog from the first client transaction):
 ACK sip:192.168.1.4:5060 SIP/2.0
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 1 ACK
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:Takeo@192.168.1.2:4000>;tag=31816475
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKb2c0cbc57047ec99b082b4fe9067717f,SIP/2.0/UDP 192.168.1.2:5060;branch=3139322e3136382e312e323a3530363
Max-Forwards: 69
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



****************************************************
Request BYE received:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:Takeo@192.168.1.2:4000>;tag=31816475
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKa612eb01cc53f66f4ae4fb1f9bbf0196
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@13eba7c9
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@ff8399
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received BYE
ProxyRouter: request:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>
To: <sip:Takeo@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKa612eb01cc53f66f4ae4fb1f9bbf0196
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG, ProxyRouter, getNextHop(), The request has at least one route, we use the first one: 192.168.1.4:5060/udp

***************************************************************
***************************************************************
Response 200 OK received:
SIP/2.0 200 OK
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:Takeo@192.168.1.2:4000>;tag=31816475
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK4ee23b22b0d42adb6acec06684649d0d,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKa612eb01cc53f66f4ae4fb1f9bbf0196
Max-Forwards: 70
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@6226dfaa
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@f997aa
ResponseForwarding, forwardResponse() (STEP 9), the  response is statelessly forwarded:
SIP/2.0 200 OK
Call-ID: cffd951af60952a67235fb0965a2d5cf@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:Mixalis@192.168.1.2:4000;transport=udp>;tag=26170928
To: <sip:Takeo@192.168.1.2:4000>;tag=31816475
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKa612eb01cc53f66f4ae4fb1f9bbf0196
Max-Forwards: 70
Content-Length: 0


Proxy Clean up

*****************************************************

Stopping the proxy
Proxy stopped

*****************************************************

DEBUG properties set!
The proxy is responsible for the domain:192.168.1.2
Here is one domain to take care of:there.com
Here is one domain to take care of:pingtel.com
Here is one domain to take care of:ubi.com
Here is one domain to take care of:hotmail.com
Here is one domain to take care of:nist.gov
Here is one domain to take care of:nitrogen.epact.se
Here is one domain to take care of:192.168.1.2
DEBUG, ProxyRouter, the default route is: null
We don't export the registrations because RMI is disabled.
Parsing the XML registrations file: ./gov/nist/sip/proxy/configuration/registrations.xml
Parsing XML registrations
XML Registrations parsed successfully!!!
Registrar, parseXMLregistrations(), Uploading of 2 registrations
RegistrationsTable, addRegistration(), registration  added for the key: sip:mranga@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:mranga@nist.gov
   DisplayName=Ranga 
   Contacts=[]
RegistrationsTable, addRegistration(), registration  added for the key: sip:deruelle@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:deruelle@nist.gov
   DisplayName=Deruelle 
   Contacts=[]
Registrar, registerToProxies(), we have to register to 0 proxies

*****************************************************


****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 65fa644d316874a976a1671725442218@192.168.1.4
CSeq: 1 MESSAGE
From: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>;tag=12674827
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bKd6e8a2175f74db1d4902e6a10f259d8a
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 30

SIGNUP Takeo:123:123:123:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 65fa644d316874a976a1671725442218@192.168.1.4
CSeq: 1 MESSAGE
From: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>;tag=12674827
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bKd6e8a2175f74db1d4902e6a10f259d8a
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 30

SIGNUP Takeo:123:123:123:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 0525e8aa4afa5701078c8be4a6839ed6@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>;tag=12674827
To: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bKaf21fad8e9a96d9afa2df2050c66880c
Max-Forwards: 70
Pwd: 123
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:takeo@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:takeo@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.4:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:takeo@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

registered user: "sip:takeo@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>;expires=3600

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: 0525e8aa4afa5701078c8be4a6839ed6@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>;tag=12674827
To: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bKaf21fad8e9a96d9afa2df2050c66880c
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 0525e8aa4afa5701078c8be4a6839ed6@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>;tag=12674827
To: "KLOUP" <sip:Takeo@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bKaf21fad8e9a96d9afa2df2050c66880c
Max-Forwards: 70
Pwd: 123
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:Takeo@192.168.1.2:4000

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 3a7543c6cffa8e55f6bd8f26f63c368c@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKdbe18a6f0fef61f273ad1a386af05cf3
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 22

SIGNUP Mix:::mix:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 8f8349a4be545414f0f7b36c2525984e@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK8225ad6d1dca12eb3d4f74979b2e17d6
Max-Forwards: 70
Pwd: mix
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:mix@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:mix@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.2:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:mix@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:mix@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

registered user: "sip:takeo@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>;expires=3600

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: 8f8349a4be545414f0f7b36c2525984e@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK8225ad6d1dca12eb3d4f74979b2e17d6
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 8f8349a4be545414f0f7b36c2525984e@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK8225ad6d1dca12eb3d4f74979b2e17d6
Max-Forwards: 70
Pwd: mix
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:Mix@192.168.1.2:4000

****************************************************
Request INVITE received:
INVITE sip:Takeo@192.168.1.2:4000 SIP/2.0
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:Takeo@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKb20638c5aef1d306ab08737b6b627453
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:takeo@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (No routes detected)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@565297e3
dialog =  gov.nist.javax.sip.stack.SIPDialog@1cfdf55
RequestForwarding, forwardRequestStatefully(), the dialog state is null, so we have to forward the request using a new clientTransaction
ProxyRouter: request:
INVITE sip:192.168.1.4:5060 SIP/2.0
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:Takeo@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK9f62acd871228d72a805bbc38d633063,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKb20638c5aef1d306ab08737b6b627453
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

DEBUG, ProxyRouter, getNextHops(),  the hop added: host:192.168.1.4 port:5060 transport:udp
RequestForwarding, forwardRequestStatefully(),, cloned request forwarded statefully:
 INVITE sip:192.168.1.4:5060 SIP/2.0
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:Takeo@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKf0ebcdcc0ac81c22386aa564f0bc4444,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKb20638c5aef1d306ab08737b6b627453
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31


***************************************************************
***************************************************************
Response 100 Trying received:
SIP/2.0 100 Trying
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:Takeo@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKf0ebcdcc0ac81c22386aa564f0bc4444,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKb20638c5aef1d306ab08737b6b627453
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@dca072ec
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@a6edb5
ResponseForwarding, forwardResponse() (STEP 5) don't forward the 100 Trying.

***************************************************************
***************************************************************
Response 180 Ringing received:
SIP/2.0 180 Ringing
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:Takeo@192.168.1.2:4000>;tag=11715138
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKf0ebcdcc0ac81c22386aa564f0bc4444,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKb20638c5aef1d306ab08737b6b627453
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@dca072ec
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@a6edb5
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 180 Ringing
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:Takeo@192.168.1.2:4000>;tag=11715138
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKb20638c5aef1d306ab08737b6b627453
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



***************************************************************
***************************************************************
Response 200 OK received:
SIP/2.0 200 OK
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:Takeo@192.168.1.2:4000>;tag=11715138
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKf0ebcdcc0ac81c22386aa564f0bc4444,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKb20638c5aef1d306ab08737b6b627453
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 157

v=0
o=George 0 0 IN IP4 192.168.1.4
s=-
c=IN IP4 192.168.1.4
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31
a=recvonly

Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@dca072ec
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@a6edb5
ResponseForwarding, forwardResponse()  (STEP 9), we changed the toTag:11715138
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 200 OK
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:Takeo@192.168.1.2:4000>;tag=11715138
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKb20638c5aef1d306ab08737b6b627453
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 157

v=0
o=George 0 0 IN IP4 192.168.1.4
s=-
c=IN IP4 192.168.1.4
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31
a=recvonly


****************************************************
Request ACK received:
ACK sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 1 ACK
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:Takeo@192.168.1.2:4000>;tag=11715138
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=3139322e3136382e312e323a3530363
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@18c6447b
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1cfdf55
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received ACK not targeted for proxy
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:takeo@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (the route has no lr parameter)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
RequestForwarding, forwardRequest(), no Content-Type header, we don't stripe any parameters!!!
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@18c6447b
dialog =  gov.nist.javax.sip.stack.SIPDialog@1cfdf55
Dialog checked.
Printing TransactionsMappingTable...
***********************************************
this = gov.nist.sip.proxy.TransactionsMapping@17343c7
TRANSACTIONS TABLE: 
- serverTransaction: gov.nist.javax.sip.stack.SIPServerTransaction@565297e3
   - state: Terminated Transaction
   - dialog: gov.nist.javax.sip.stack.SIPDialog@1cfdf55
   - dialog state: Confirmed Dialog
   - its clientTransaction: gov.nist.javax.sip.stack.SIPClientTransaction@dca072ec, state: Terminated Transaction
********************************************

Getting peer dialog...
RequestForwarding, forwardRequestStatefully(), cloned ACK forwarded statefully  (using the dialog from the first client transaction):
 ACK sip:192.168.1.4:5060 SIP/2.0
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 1 ACK
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:Takeo@192.168.1.2:4000>;tag=11715138
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK7aabd5df46fa0abb288ca3e29a698335,SIP/2.0/UDP 192.168.1.2:5060;branch=3139322e3136382e312e323a3530363
Max-Forwards: 69
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



****************************************************
Request BYE received:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:Takeo@192.168.1.2:4000>;tag=11715138
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKaa2cb6434c21b9eafe375a0e72b6d22c
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@10788516
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1cfdf55
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received BYE
ProxyRouter: request:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>
To: <sip:Takeo@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKaa2cb6434c21b9eafe375a0e72b6d22c
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG, ProxyRouter, getNextHop(), The request has at least one route, we use the first one: 192.168.1.4:5060/udp

***************************************************************
***************************************************************
Response 200 OK received:
SIP/2.0 200 OK
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:Takeo@192.168.1.2:4000>;tag=11715138
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK372ed6db769af27ca3d1be8f39b64692,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKaa2cb6434c21b9eafe375a0e72b6d22c
Max-Forwards: 70
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@a3d5bfaa
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@a6edb5
ResponseForwarding, forwardResponse() (STEP 9), the  response is statelessly forwarded:
SIP/2.0 200 OK
Call-ID: 036bbd36411aec824ac3f982c6f5ff22@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:Mix@192.168.1.2:4000;transport=udp>;tag=25433338
To: <sip:Takeo@192.168.1.2:4000>;tag=11715138
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKaa2cb6434c21b9eafe375a0e72b6d22c
Max-Forwards: 70
Content-Length: 0


Proxy Clean up

*****************************************************

Stopping the proxy
Proxy stopped

*****************************************************

DEBUG properties set!
The proxy is responsible for the domain:192.168.1.2
Here is one domain to take care of:there.com
Here is one domain to take care of:pingtel.com
Here is one domain to take care of:ubi.com
Here is one domain to take care of:hotmail.com
Here is one domain to take care of:nist.gov
Here is one domain to take care of:nitrogen.epact.se
Here is one domain to take care of:192.168.1.2
DEBUG, ProxyRouter, the default route is: null
We don't export the registrations because RMI is disabled.
Parsing the XML registrations file: ./gov/nist/sip/proxy/configuration/registrations.xml
Parsing XML registrations
XML Registrations parsed successfully!!!
Registrar, parseXMLregistrations(), Uploading of 2 registrations
RegistrationsTable, addRegistration(), registration  added for the key: sip:mranga@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:mranga@nist.gov
   DisplayName=Ranga 
   Contacts=[]
RegistrationsTable, addRegistration(), registration  added for the key: sip:deruelle@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:deruelle@nist.gov
   DisplayName=Deruelle 
   Contacts=[]
Registrar, registerToProxies(), we have to register to 0 proxies

*****************************************************


****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: cd3ac1089b22046d935af92bae8ba6b5@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKbd35f0ef81519d8a3a43f20020726fe6
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 22

SIGNUP mix:1:1:1:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 5e6f4d3e1126ecc2105f9ae73946288e@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd7561d84991d8760ab6107547bc8a00f
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:mix@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:mix@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.2:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:mix@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:mix@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: 5e6f4d3e1126ecc2105f9ae73946288e@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd7561d84991d8760ab6107547bc8a00f
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 5e6f4d3e1126ecc2105f9ae73946288e@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd7561d84991d8760ab6107547bc8a00f
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:mix@192.168.1.2:4000

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 392b07bf89f4e6f7e3743729149672ea@192.168.1.4
CSeq: 1 MESSAGE
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK692a7304b1d19cbf7ec5c8c971503d36
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 22

SIGNUP tt:1::1:Premium
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 0897f06e19854d23f4ce8b69cb28e58b@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
To: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bKc02dc287af156ba87eae89b88d134fdd
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:tt@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:tt@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.4:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:tt@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:tt@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>;expires=3600

registered user: "sip:mix@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: 0897f06e19854d23f4ce8b69cb28e58b@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
To: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bKc02dc287af156ba87eae89b88d134fdd
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 0897f06e19854d23f4ce8b69cb28e58b@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
To: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bKc02dc287af156ba87eae89b88d134fdd
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:tt@192.168.1.2:4000

****************************************************
Request INVITE received:
INVITE sip:tt@192.168.1.2:4000 SIP/2.0
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK4baba67d1c7bbcb20b7fbd519302a0da
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:tt@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (No routes detected)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@62eca065
dialog =  gov.nist.javax.sip.stack.SIPDialog@33bb11
RequestForwarding, forwardRequestStatefully(), the dialog state is null, so we have to forward the request using a new clientTransaction
ProxyRouter: request:
INVITE sip:192.168.1.4:5060 SIP/2.0
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK9fb4b0a53169422e85775bd99560d1e3,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK4baba67d1c7bbcb20b7fbd519302a0da
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

DEBUG, ProxyRouter, getNextHops(),  the hop added: host:192.168.1.4 port:5060 transport:udp
RequestForwarding, forwardRequestStatefully(),, cloned request forwarded statefully:
 INVITE sip:192.168.1.4:5060 SIP/2.0
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK7cdf75abb1139f5038de1f399ae27654,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK4baba67d1c7bbcb20b7fbd519302a0da
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31


***************************************************************
***************************************************************
Response 100 Trying received:
SIP/2.0 100 Trying
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK7cdf75abb1139f5038de1f399ae27654,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK4baba67d1c7bbcb20b7fbd519302a0da
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@9c1c2d39
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1e05ddd
ResponseForwarding, forwardResponse() (STEP 5) don't forward the 100 Trying.

***************************************************************
***************************************************************
Response 180 Ringing received:
SIP/2.0 180 Ringing
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:tt@192.168.1.2:4000>;tag=3016726
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK7cdf75abb1139f5038de1f399ae27654,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK4baba67d1c7bbcb20b7fbd519302a0da
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@9c1c2d39
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1e05ddd
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 180 Ringing
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:tt@192.168.1.2:4000>;tag=3016726
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK4baba67d1c7bbcb20b7fbd519302a0da
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



***************************************************************
***************************************************************
Response 200 OK received:
SIP/2.0 200 OK
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:tt@192.168.1.2:4000>;tag=3016726
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK7cdf75abb1139f5038de1f399ae27654,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK4baba67d1c7bbcb20b7fbd519302a0da
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 157

v=0
o=George 0 0 IN IP4 192.168.1.4
s=-
c=IN IP4 192.168.1.4
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31
a=recvonly

Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@9c1c2d39
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1e05ddd
ResponseForwarding, forwardResponse()  (STEP 9), we changed the toTag:3016726
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 200 OK
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:tt@192.168.1.2:4000>;tag=3016726
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK4baba67d1c7bbcb20b7fbd519302a0da
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 157

v=0
o=George 0 0 IN IP4 192.168.1.4
s=-
c=IN IP4 192.168.1.4
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31
a=recvonly


****************************************************
Request ACK received:
ACK sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 1 ACK
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:tt@192.168.1.2:4000>;tag=3016726
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=3139322e3136382e312e323a3530363
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@5bf726a4
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@33bb11
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received ACK not targeted for proxy
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:tt@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (the route has no lr parameter)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
RequestForwarding, forwardRequest(), no Content-Type header, we don't stripe any parameters!!!
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@5bf726a4
dialog =  gov.nist.javax.sip.stack.SIPDialog@33bb11
Dialog checked.
Printing TransactionsMappingTable...
***********************************************
this = gov.nist.sip.proxy.TransactionsMapping@48ec4f
TRANSACTIONS TABLE: 
- serverTransaction: gov.nist.javax.sip.stack.SIPServerTransaction@62eca065
   - state: Terminated Transaction
   - dialog: gov.nist.javax.sip.stack.SIPDialog@33bb11
   - dialog state: Confirmed Dialog
   - its clientTransaction: gov.nist.javax.sip.stack.SIPClientTransaction@9c1c2d39, state: Terminated Transaction
********************************************

Getting peer dialog...
RequestForwarding, forwardRequestStatefully(), cloned ACK forwarded statefully  (using the dialog from the first client transaction):
 ACK sip:192.168.1.4:5060 SIP/2.0
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 1 ACK
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:tt@192.168.1.2:4000>;tag=3016726
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKfc9656ade518bb97c8177515a1611f6b,SIP/2.0/UDP 192.168.1.2:5060;branch=3139322e3136382e312e323a3530363
Max-Forwards: 69
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



****************************************************
Request BYE received:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:tt@192.168.1.2:4000>;tag=3016726
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK5717df54781f606a962ae76fdede7f8d
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@f58c58ee
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@33bb11
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received BYE
ProxyRouter: request:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK5717df54781f606a962ae76fdede7f8d
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG, ProxyRouter, getNextHop(), The request has at least one route, we use the first one: 192.168.1.4:5060/udp

***************************************************************
***************************************************************
Response 200 OK received:
SIP/2.0 200 OK
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:tt@192.168.1.2:4000>;tag=3016726
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK29622c8502fe94f85b53f3831ef3b56c,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK5717df54781f606a962ae76fdede7f8d
Max-Forwards: 70
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@b1965ab2
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1e05ddd
ResponseForwarding, forwardResponse() (STEP 9), the  response is statelessly forwarded:
SIP/2.0 200 OK
Call-ID: 3443c062dfe7287c49b34c57b5cfc185@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=15883032
To: <sip:tt@192.168.1.2:4000>;tag=3016726
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK5717df54781f606a962ae76fdede7f8d
Max-Forwards: 70
Content-Length: 0



****************************************************
Request INVITE received:
INVITE sip:mix@192.168.1.2:4000 SIP/2.0
Call-ID: 49edc44ef523b637a46cf2282361d1aa@192.168.1.4
CSeq: 1 INVITE
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
To: <sip:mix@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK066bfa19a0b7f35374759c22588db3fd
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Type: application/sdp
Content-Length: 157

v=0
o=George 0 0 IN IP4 192.168.1.4
s=-
c=IN IP4 192.168.1.4
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31
a=recvonly

DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:mix@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (No routes detected)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@265cef66
dialog =  gov.nist.javax.sip.stack.SIPDialog@14defcc
RequestForwarding, forwardRequestStatefully(), the dialog state is null, so we have to forward the request using a new clientTransaction
ProxyRouter: request:
INVITE sip:192.168.1.2:5060 SIP/2.0
Call-ID: 49edc44ef523b637a46cf2282361d1aa@192.168.1.4
CSeq: 1 INVITE
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
To: <sip:mix@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK5d283a9969da5d8a2b69ebccc069b457,SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK066bfa19a0b7f35374759c22588db3fd
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 157

v=0
o=George 0 0 IN IP4 192.168.1.4
s=-
c=IN IP4 192.168.1.4
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31
a=recvonly

DEBUG, ProxyRouter, getNextHops(),  the hop added: host:192.168.1.2 port:5060 transport:udp
RequestForwarding, forwardRequestStatefully(),, cloned request forwarded statefully:
 INVITE sip:192.168.1.2:5060 SIP/2.0
Call-ID: 49edc44ef523b637a46cf2282361d1aa@192.168.1.4
CSeq: 1 INVITE
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
To: <sip:mix@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKa91f628cb81a4e211bb4443d76f45628,SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK066bfa19a0b7f35374759c22588db3fd
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 157

v=0
o=George 0 0 IN IP4 192.168.1.4
s=-
c=IN IP4 192.168.1.4
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31
a=recvonly


***************************************************************
***************************************************************
Response 180 Ringing received:
SIP/2.0 180 Ringing
Call-ID: 49edc44ef523b637a46cf2282361d1aa@192.168.1.4
CSeq: 1 INVITE
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
To: <sip:mix@192.168.1.2:4000>;tag=5589457
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKa91f628cb81a4e211bb4443d76f45628,SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK066bfa19a0b7f35374759c22588db3fd
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@c25bb151
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1f7c46e
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 180 Ringing
Call-ID: 49edc44ef523b637a46cf2282361d1aa@192.168.1.4
CSeq: 1 INVITE
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
To: <sip:mix@192.168.1.2:4000>;tag=5589457
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK066bfa19a0b7f35374759c22588db3fd
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



***************************************************************
***************************************************************
Response 200 OK received:
SIP/2.0 200 OK
Call-ID: 49edc44ef523b637a46cf2282361d1aa@192.168.1.4
CSeq: 1 INVITE
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
To: <sip:mix@192.168.1.2:4000>;tag=5589457
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKa91f628cb81a4e211bb4443d76f45628,SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK066bfa19a0b7f35374759c22588db3fd
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@c25bb151
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1f7c46e
ResponseForwarding, forwardResponse()  (STEP 9), we changed the toTag:5589457
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 200 OK
Call-ID: 49edc44ef523b637a46cf2282361d1aa@192.168.1.4
CSeq: 1 INVITE
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
To: <sip:mix@192.168.1.2:4000>;tag=5589457
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK066bfa19a0b7f35374759c22588db3fd
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31


****************************************************
Request ACK received:
ACK sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: 49edc44ef523b637a46cf2282361d1aa@192.168.1.4
CSeq: 1 ACK
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
To: <sip:mix@192.168.1.2:4000>;tag=5589457
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=3139322e3136382e312e343a3530363
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@77067f69
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@14defcc
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received ACK not targeted for proxy
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:mix@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (the route has no lr parameter)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
RequestForwarding, forwardRequest(), no Content-Type header, we don't stripe any parameters!!!
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@77067f69
dialog =  gov.nist.javax.sip.stack.SIPDialog@14defcc
Dialog checked.
Printing TransactionsMappingTable...
***********************************************
this = gov.nist.sip.proxy.TransactionsMapping@19dd00d
TRANSACTIONS TABLE: 
- serverTransaction: gov.nist.javax.sip.stack.SIPServerTransaction@265cef66
   - state: Terminated Transaction
   - dialog: gov.nist.javax.sip.stack.SIPDialog@14defcc
   - dialog state: Confirmed Dialog
   - its clientTransaction: gov.nist.javax.sip.stack.SIPClientTransaction@c25bb151, state: Terminated Transaction
********************************************

Getting peer dialog...
RequestForwarding, forwardRequestStatefully(), cloned ACK forwarded statefully  (using the dialog from the first client transaction):
 ACK sip:192.168.1.2:5060 SIP/2.0
Call-ID: 49edc44ef523b637a46cf2282361d1aa@192.168.1.4
CSeq: 1 ACK
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
To: <sip:mix@192.168.1.2:4000>;tag=5589457
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK784a7002d86f945ba194ec7fc8f7ae87,SIP/2.0/UDP 192.168.1.4:5060;branch=3139322e3136382e312e343a3530363
Max-Forwards: 69
Route: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



****************************************************
Request BYE received:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: 49edc44ef523b637a46cf2282361d1aa@192.168.1.4
CSeq: 1 BYE
To: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
From: <sip:mix@192.168.1.2:4000>;tag=5589457
Max-Forwards: 69
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKa1d2186d0e554b80b62eaf0ba0db6ff2
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@e0684614
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@1f7c46e
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received BYE
ProxyRouter: request:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: 49edc44ef523b637a46cf2282361d1aa@192.168.1.4
CSeq: 1 BYE
To: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>
From: <sip:mix@192.168.1.2:4000>
Max-Forwards: 69
Via: SIP/2.0/UDP 192.168.1.2:4000,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKa1d2186d0e554b80b62eaf0ba0db6ff2
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG, ProxyRouter, getNextHop(), The request has at least one route, we use the first one: 192.168.1.4:5060/udp

***************************************************************
***************************************************************
Response 200 OK received:
SIP/2.0 200 OK
Call-ID: 49edc44ef523b637a46cf2282361d1aa@192.168.1.4
CSeq: 1 BYE
To: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
From: <sip:mix@192.168.1.2:4000>;tag=5589457
Max-Forwards: 69
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKbe5ad878dbbe197b1858583049c8a83a,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKa1d2186d0e554b80b62eaf0ba0db6ff2
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@b32d9900
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@14defcc
ResponseForwarding, forwardResponse() (STEP 9), the  response is statelessly forwarded:
SIP/2.0 200 OK
Call-ID: 49edc44ef523b637a46cf2282361d1aa@192.168.1.4
CSeq: 1 BYE
To: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=22505839
From: <sip:mix@192.168.1.2:4000>;tag=5589457
Max-Forwards: 69
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKa1d2186d0e554b80b62eaf0ba0db6ff2
Content-Length: 0


Proxy Clean up

*****************************************************

Stopping the proxy
Proxy stopped

*****************************************************

DEBUG properties set!
The proxy is responsible for the domain:192.168.1.2
Here is one domain to take care of:there.com
Here is one domain to take care of:pingtel.com
Here is one domain to take care of:ubi.com
Here is one domain to take care of:hotmail.com
Here is one domain to take care of:nist.gov
Here is one domain to take care of:nitrogen.epact.se
Here is one domain to take care of:192.168.1.2
DEBUG, ProxyRouter, the default route is: null
We don't export the registrations because RMI is disabled.
Parsing the XML registrations file: ./gov/nist/sip/proxy/configuration/registrations.xml
Parsing XML registrations
XML Registrations parsed successfully!!!
Registrar, parseXMLregistrations(), Uploading of 2 registrations
RegistrationsTable, addRegistration(), registration  added for the key: sip:mranga@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:mranga@nist.gov
   DisplayName=Ranga 
   Contacts=[]
RegistrationsTable, addRegistration(), registration  added for the key: sip:deruelle@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:deruelle@nist.gov
   DisplayName=Deruelle 
   Contacts=[]
Registrar, registerToProxies(), we have to register to 0 proxies

*****************************************************


****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: d9cdd39ce89bee347c75194ffa914a7f@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK8f76f6eadd3661a6ca0649604c1e829c
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 20

SIGNUP mix:::2:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: d145347133753fac2e211f1935bf8d3d@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKc896670df781ba937cfebe2aa9f9ebc7
Max-Forwards: 70
Pwd: 2
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:mix@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:mix@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.2:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:mix@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:mix@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: d145347133753fac2e211f1935bf8d3d@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKc896670df781ba937cfebe2aa9f9ebc7
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: d145347133753fac2e211f1935bf8d3d@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKc896670df781ba937cfebe2aa9f9ebc7
Max-Forwards: 70
Pwd: 2
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:mix@192.168.1.2:4000

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: d1833c8c780705034432348ae975a626@192.168.1.4
CSeq: 1 MESSAGE
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=12674827
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK66e64eef0e7d9ee755e8a6f656ee22eb
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 20

SIGNUP tt:::12:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 9853608acef56eed8220cef5a4cef45f@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=12674827
To: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK904112a0f055ce6df54916fb4b6f8eb0
Max-Forwards: 70
Pwd: 12
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:tt@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:tt@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.4:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:tt@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:tt@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>;expires=3600

registered user: "sip:mix@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: 9853608acef56eed8220cef5a4cef45f@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=12674827
To: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK904112a0f055ce6df54916fb4b6f8eb0
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 9853608acef56eed8220cef5a4cef45f@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=12674827
To: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK904112a0f055ce6df54916fb4b6f8eb0
Max-Forwards: 70
Pwd: 12
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:tt@192.168.1.2:4000

****************************************************
Request INVITE received:
INVITE sip:tt@192.168.1.2:4000 SIP/2.0
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKfc91a2c3262674848ca083239e2ae1db
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:tt@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (No routes detected)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@1308bd91
dialog =  gov.nist.javax.sip.stack.SIPDialog@6edffb
RequestForwarding, forwardRequestStatefully(), the dialog state is null, so we have to forward the request using a new clientTransaction
ProxyRouter: request:
INVITE sip:192.168.1.4:5060 SIP/2.0
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK05c9053635570f3df3818e17199463c7,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKfc91a2c3262674848ca083239e2ae1db
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

DEBUG, ProxyRouter, getNextHops(),  the hop added: host:192.168.1.4 port:5060 transport:udp
RequestForwarding, forwardRequestStatefully(),, cloned request forwarded statefully:
 INVITE sip:192.168.1.4:5060 SIP/2.0
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK2030008e85e3a2b403329827e3c01102,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKfc91a2c3262674848ca083239e2ae1db
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31


***************************************************************
***************************************************************
Response 100 Trying received:
SIP/2.0 100 Trying
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK2030008e85e3a2b403329827e3c01102,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKfc91a2c3262674848ca083239e2ae1db
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@6be553b8
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@3f1e93
ResponseForwarding, forwardResponse() (STEP 5) don't forward the 100 Trying.

***************************************************************
***************************************************************
Response 180 Ringing received:
SIP/2.0 180 Ringing
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=11931757
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK2030008e85e3a2b403329827e3c01102,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKfc91a2c3262674848ca083239e2ae1db
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@6be553b8
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@3f1e93
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 180 Ringing
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=11931757
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKfc91a2c3262674848ca083239e2ae1db
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



***************************************************************
***************************************************************
Response 200 OK received:
SIP/2.0 200 OK
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=11931757
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK2030008e85e3a2b403329827e3c01102,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKfc91a2c3262674848ca083239e2ae1db
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 157

v=0
o=George 0 0 IN IP4 192.168.1.4
s=-
c=IN IP4 192.168.1.4
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31
a=recvonly

Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@6be553b8
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@3f1e93
ResponseForwarding, forwardResponse()  (STEP 9), we changed the toTag:11931757
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 200 OK
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=11931757
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKfc91a2c3262674848ca083239e2ae1db
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 157

v=0
o=George 0 0 IN IP4 192.168.1.4
s=-
c=IN IP4 192.168.1.4
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31
a=recvonly


****************************************************
Request ACK received:
ACK sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 1 ACK
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=11931757
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=3139322e3136382e312e323a3530363
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@13bd17b5
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@6edffb
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received ACK not targeted for proxy
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:tt@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (the route has no lr parameter)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
RequestForwarding, forwardRequest(), no Content-Type header, we don't stripe any parameters!!!
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@13bd17b5
dialog =  gov.nist.javax.sip.stack.SIPDialog@6edffb
Dialog checked.
Printing TransactionsMappingTable...
***********************************************
this = gov.nist.sip.proxy.TransactionsMapping@1e27131
TRANSACTIONS TABLE: 
- serverTransaction: gov.nist.javax.sip.stack.SIPServerTransaction@1308bd91
   - state: Terminated Transaction
   - dialog: gov.nist.javax.sip.stack.SIPDialog@6edffb
   - dialog state: Confirmed Dialog
   - its clientTransaction: gov.nist.javax.sip.stack.SIPClientTransaction@6be553b8, state: Terminated Transaction
********************************************

Getting peer dialog...
RequestForwarding, forwardRequestStatefully(), cloned ACK forwarded statefully  (using the dialog from the first client transaction):
 ACK sip:192.168.1.4:5060 SIP/2.0
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 1 ACK
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=11931757
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK715e311320c8ca9a8401ffd60c508238,SIP/2.0/UDP 192.168.1.2:5060;branch=3139322e3136382e312e323a3530363
Max-Forwards: 69
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



****************************************************
Request BYE received:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=11931757
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKcd9fe35201d3d69f986c234514bc56dc
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@178cff9
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@6edffb
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received BYE
ProxyRouter: request:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKcd9fe35201d3d69f986c234514bc56dc
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG, ProxyRouter, getNextHop(), The request has at least one route, we use the first one: 192.168.1.4:5060/udp

***************************************************************
***************************************************************
Response 200 OK received:
SIP/2.0 200 OK
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=11931757
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKe6dd5fb22b9bd561e22123474a2df0dc,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKcd9fe35201d3d69f986c234514bc56dc
Max-Forwards: 70
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@ade3d02e
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@3f1e93
ResponseForwarding, forwardResponse() (STEP 9), the  response is statelessly forwarded:
SIP/2.0 200 OK
Call-ID: e3f86ed8c2f62c46dd9bad417764ab7b@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=11931757
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKcd9fe35201d3d69f986c234514bc56dc
Max-Forwards: 70
Content-Length: 0



****************************************************
Request INVITE received:
INVITE sip:tt@192.168.1.2:4000 SIP/2.0
Call-ID: f59d726a57d9492af17480e96bc01099@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd0204e1e566b3d22a6797caecbb71725
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:tt@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (No routes detected)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@39828510
dialog =  gov.nist.javax.sip.stack.SIPDialog@135151
RequestForwarding, forwardRequestStatefully(), the dialog state is null, so we have to forward the request using a new clientTransaction
ProxyRouter: request:
INVITE sip:192.168.1.4:5060 SIP/2.0
Call-ID: f59d726a57d9492af17480e96bc01099@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK22558328e526c4f5755cb50ae29dd344,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd0204e1e566b3d22a6797caecbb71725
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31

DEBUG, ProxyRouter, getNextHops(),  the hop added: host:192.168.1.4 port:5060 transport:udp
RequestForwarding, forwardRequestStatefully(),, cloned request forwarded statefully:
 INVITE sip:192.168.1.4:5060 SIP/2.0
Call-ID: f59d726a57d9492af17480e96bc01099@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK532a5b208286fa11a3b8d8b59cb77e24,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd0204e1e566b3d22a6797caecbb71725
Max-Forwards: 69
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Type: application/sdp
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 147

v=0
o=Michalis 0 0 IN IP4 192.168.1.2
s=-
c=IN IP4 192.168.1.2
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31


***************************************************************
***************************************************************
Response 180 Ringing received:
SIP/2.0 180 Ringing
Call-ID: f59d726a57d9492af17480e96bc01099@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=18604545
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK532a5b208286fa11a3b8d8b59cb77e24,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd0204e1e566b3d22a6797caecbb71725
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@3acdfc08
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@9fe17d
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 180 Ringing
Call-ID: f59d726a57d9492af17480e96bc01099@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=18604545
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd0204e1e566b3d22a6797caecbb71725
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



***************************************************************
***************************************************************
Response 200 OK received:
SIP/2.0 200 OK
Call-ID: f59d726a57d9492af17480e96bc01099@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=18604545
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK532a5b208286fa11a3b8d8b59cb77e24,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd0204e1e566b3d22a6797caecbb71725
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 157

v=0
o=George 0 0 IN IP4 192.168.1.4
s=-
c=IN IP4 192.168.1.4
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31
a=recvonly

Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@3acdfc08
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@9fe17d
ResponseForwarding, forwardResponse()  (STEP 9), we changed the toTag:18604545
ResponseForwarding, forwardResponse() (STEP 9), the  response is statefully forwarded: 
SIP/2.0 200 OK
Call-ID: f59d726a57d9492af17480e96bc01099@192.168.1.2
CSeq: 1 INVITE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=18604545
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd0204e1e566b3d22a6797caecbb71725
Max-Forwards: 69
Record-Route: <sip:192.168.1.2:4000>
Content-Type: application/sdp
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 157

v=0
o=George 0 0 IN IP4 192.168.1.4
s=-
c=IN IP4 192.168.1.4
t=0 0
m=audio 22224 RTP/AVP 0 3 4 5 6 8 15 18
m=video 22222 RTP/AVP 26 34 31
a=recvonly


****************************************************
Request ACK received:
ACK sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: f59d726a57d9492af17480e96bc01099@192.168.1.2
CSeq: 1 ACK
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=18604545
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=3139322e3136382e312e323a3530363
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@65a5f2b2
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@135151
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received ACK not targeted for proxy
Proxy, processRequest(), we canonicalized the request-URI
RegistrationsTable, hasRegistration(), Checking registration for "sip:tt@192.168.1.2:4000" : registered
Proxy, processRequest(), the target set is the set of the contacts URI from the  location service
RequestForwarding, forwardRequest() (STEP 1), the request is cloned
RequestForwarding, forwardRequest() (STEP 2), The Request-URI in the copy's start line is replaced with the URI for this target
RequestForwarding, forwardRequest(),  (STEP 3) MaxForwardHeader  decremented by one.
RequestForwarding, forwardRequest(), (STEP 4) record-route header created and added to the  cloned request
RequestForwarding, forwardRequest(), (STEP 5) No Additional headers to add...
RequestForwarding, forwardRequest(), (STEP 6) no Postprocess routing information to do (the route has no lr parameter)...
RequestForwarding, forwardRequest(), (STEP 7) Determine Next-Hop Address, Port, and Transport will be done by the stack...
RequestForwarding, forwardRequest(), (STEP 8) the proxy inserts a Via header field value into the copy before the existing Via header field values
RequestForwarding, forwardRequest(), (STEP 8) Loop detection not implemented
RequestForwarding, forwardRequest(), no Content-Type header, we don't stripe any parameters!!!
serverTransaction =  gov.nist.javax.sip.stack.SIPServerTransaction@65a5f2b2
dialog =  gov.nist.javax.sip.stack.SIPDialog@135151
Dialog checked.
Printing TransactionsMappingTable...
***********************************************
this = gov.nist.sip.proxy.TransactionsMapping@d82990
TRANSACTIONS TABLE: 
- serverTransaction: gov.nist.javax.sip.stack.SIPServerTransaction@39828510
   - state: Terminated Transaction
   - dialog: gov.nist.javax.sip.stack.SIPDialog@135151
   - dialog state: Confirmed Dialog
   - its clientTransaction: gov.nist.javax.sip.stack.SIPClientTransaction@3acdfc08, state: Terminated Transaction
********************************************

Getting peer dialog...
RequestForwarding, forwardRequestStatefully(), cloned ACK forwarded statefully  (using the dialog from the first client transaction):
 ACK sip:192.168.1.4:5060 SIP/2.0
Call-ID: f59d726a57d9492af17480e96bc01099@192.168.1.2
CSeq: 1 ACK
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=18604545
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bK2c533f25fdcdc2da4e100feab64180f4,SIP/2.0/UDP 192.168.1.2:5060;branch=3139322e3136382e312e323a3530363
Max-Forwards: 69
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Record-Route: <sip:192.168.1.2:4000>
Content-Length: 0



****************************************************
Request BYE received:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: f59d726a57d9492af17480e96bc01099@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=18604545
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK7fcb1680306232fec6b3ea50fe2c3648
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: here is the  server transaction: gov.nist.javax.sip.stack.SIPServerTransaction@2a416313
DEBUG INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@135151
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Received BYE
ProxyRouter: request:
BYE sip:192.168.1.2:4000;transport=udp SIP/2.0
Call-ID: f59d726a57d9492af17480e96bc01099@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>
To: <sip:tt@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:4000,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK7fcb1680306232fec6b3ea50fe2c3648
Max-Forwards: 70
Route: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG, ProxyRouter, getNextHop(), The request has at least one route, we use the first one: 192.168.1.4:5060/udp

***************************************************************
***************************************************************
Response 200 OK received:
SIP/2.0 200 OK
Call-ID: f59d726a57d9492af17480e96bc01099@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=18604545
Via: SIP/2.0/UDP 192.168.1.2:4000;branch=z9hG4bKca5cf39ef7f3b394e6f1f013c101d756,SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK7fcb1680306232fec6b3ea50fe2c3648
Max-Forwards: 70
Content-Length: 0


Processing Response in progress
DEBUG TRANSACTION INFO: here is the  client transaction: gov.nist.javax.sip.stack.SIPClientTransaction@7fb172d9
DEBUG TRANSACTION INFO: Its dialog is: gov.nist.javax.sip.stack.SIPDialog@9fe17d
ResponseForwarding, forwardResponse() (STEP 9), the  response is statelessly forwarded:
SIP/2.0 200 OK
Call-ID: f59d726a57d9492af17480e96bc01099@192.168.1.2
CSeq: 2 BYE
From: "KLOUP" <sip:mix@192.168.1.2:4000;transport=udp>;tag=17019782
To: <sip:tt@192.168.1.2:4000>;tag=18604545
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK7fcb1680306232fec6b3ea50fe2c3648
Max-Forwards: 70
Content-Length: 0


Proxy Clean up

*****************************************************

Stopping the proxy
Proxy stopped

*****************************************************

DEBUG properties set!
The proxy is responsible for the domain:192.168.1.2
Here is one domain to take care of:there.com
Here is one domain to take care of:pingtel.com
Here is one domain to take care of:ubi.com
Here is one domain to take care of:hotmail.com
Here is one domain to take care of:nist.gov
Here is one domain to take care of:nitrogen.epact.se
Here is one domain to take care of:192.168.1.2
DEBUG, ProxyRouter, the default route is: null
We don't export the registrations because RMI is disabled.
Parsing the XML registrations file: ./gov/nist/sip/proxy/configuration/registrations.xml
Parsing XML registrations
XML Registrations parsed successfully!!!
Registrar, parseXMLregistrations(), Uploading of 2 registrations
RegistrationsTable, addRegistration(), registration  added for the key: sip:mranga@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:mranga@nist.gov
   DisplayName=Ranga 
   Contacts=[]
RegistrationsTable, addRegistration(), registration  added for the key: sip:deruelle@nist.gov
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

PresenceServer.processUploadedRegistration: 
   Key=sip:deruelle@nist.gov
   DisplayName=Deruelle 
   Contacts=[]
Registrar, registerToProxies(), we have to register to 0 proxies

*****************************************************


****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 1acab4bb36f10d54dc5058b572490cc2@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>;tag=14848395
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK065c51573932723f9483b358f61ff71a
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 24

SIGNUP mrsk7:::123:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 1acab4bb36f10d54dc5058b572490cc2@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>;tag=14848395
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK065c51573932723f9483b358f61ff71a
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 24

SIGNUP mrsk7:::123:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 2f8ae5c9b05e1d1f84fd2a36d2408286@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>;tag=14848395
To: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd1b8468c6cba4125cb544d6cce003cb1
Max-Forwards: 70
Pwd: 123
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:mrsk7@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:mrsk7@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.2:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:mrsk7@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:mrsk7@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: 2f8ae5c9b05e1d1f84fd2a36d2408286@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>;tag=14848395
To: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd1b8468c6cba4125cb544d6cce003cb1
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 2f8ae5c9b05e1d1f84fd2a36d2408286@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>;tag=14848395
To: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd1b8468c6cba4125cb544d6cce003cb1
Max-Forwards: 70
Pwd: 123
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:mrsk7@192.168.1.2:4000

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 2f8ae5c9b05e1d1f84fd2a36d2408286@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>;tag=14848395
To: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK3c6cfc6bcce0f4c60eedef4d792bee70
Max-Forwards: 70
Pwd: 123
Expires: 0
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:mrsk7@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:mrsk7@192.168.1.2:4000" : registered
RegistrationsTable, updateRegistration(), registration updated for the key: sip:mrsk7@192.168.1.2:4000
RegistrationsTable, removeContact(),  contact removed for the key: sip:mrsk7@192.168.1.2:4000
DEBUG, Registration, removeContactHeader(): The contact: sip:192.168.1.2:5060 has been removed for the key: sip:mrsk7@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:mrsk7@192.168.1.2:4000"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

RegistrationsTable, removeContact(), the registration: sip:mrsk7@192.168.1.2:4000 does not contain any contacts, we remove it
RegistrationsTable, removeRegistration(),  registration removed for the key: sip:mrsk7@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:0
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: 2f8ae5c9b05e1d1f84fd2a36d2408286@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>;tag=14848395
To: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK3c6cfc6bcce0f4c60eedef4d792bee70
Max-Forwards: 70
Expires: 0
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 2f8ae5c9b05e1d1f84fd2a36d2408286@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>;tag=14848395
To: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK3c6cfc6bcce0f4c60eedef4d792bee70
Max-Forwards: 70
Pwd: 123
Expires: 0
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:mrsk7@192.168.1.2:4000

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: fded718ebc5b998cecfd03b3ace08c7b@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:mrsk7@192.168.1.2:4000;transport=udp>;tag=12115732
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK39505a2253a34938045bb7268e338513
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 22

SIGNUP mrsk7:::1:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 18ffd383e20b966627db93f23345950f@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:mik@192.168.1.2:4000;transport=udp>;tag=12115732
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK3e5eae9970ce1c54e94c1a93429fd367
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 20

SIGNUP mik:::1:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: f9de7b56d83f47e2ca19825631061041@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mik@192.168.1.2:4000;transport=udp>;tag=12115732
To: "KLOUP" <sip:mik@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKf00d1fb65ce87bf1d4b1a1fdddf67fe8
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:mik@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:mik@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), An old timer has  been stopped for the contact: sip:192.168.1.2:5060
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.2:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:mik@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:mik@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: f9de7b56d83f47e2ca19825631061041@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mik@192.168.1.2:4000;transport=udp>;tag=12115732
To: "KLOUP" <sip:mik@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKf00d1fb65ce87bf1d4b1a1fdddf67fe8
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: f9de7b56d83f47e2ca19825631061041@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:mik@192.168.1.2:4000;transport=udp>;tag=12115732
To: "KLOUP" <sip:mik@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKf00d1fb65ce87bf1d4b1a1fdddf67fe8
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:mik@192.168.1.2:4000

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: f9de7b56d83f47e2ca19825631061041@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:mik@192.168.1.2:4000;transport=udp>;tag=12115732
To: "KLOUP" <sip:mik@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKf4203681090d67ffbc414aa93e2d67f9
Max-Forwards: 70
Pwd: 1
Expires: 0
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:mik@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:mik@192.168.1.2:4000" : registered
RegistrationsTable, updateRegistration(), registration updated for the key: sip:mik@192.168.1.2:4000
RegistrationsTable, removeContact(),  contact removed for the key: sip:mik@192.168.1.2:4000
DEBUG, Registration, removeContactHeader(): The contact: sip:192.168.1.2:5060 has been removed for the key: sip:mik@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:mik@192.168.1.2:4000"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

RegistrationsTable, removeContact(), the registration: sip:mik@192.168.1.2:4000 does not contain any contacts, we remove it
RegistrationsTable, removeRegistration(),  registration removed for the key: sip:mik@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:0
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: f9de7b56d83f47e2ca19825631061041@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:mik@192.168.1.2:4000;transport=udp>;tag=12115732
To: "KLOUP" <sip:mik@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKf4203681090d67ffbc414aa93e2d67f9
Max-Forwards: 70
Expires: 0
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: f9de7b56d83f47e2ca19825631061041@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:mik@192.168.1.2:4000;transport=udp>;tag=12115732
To: "KLOUP" <sip:mik@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKf4203681090d67ffbc414aa93e2d67f9
Max-Forwards: 70
Pwd: 1
Expires: 0
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:mik@192.168.1.2:4000

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 32b3caa82ac228651ba504e7d36ed8be@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=12674827
To: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK988f0b390dedb821b319bf41b6753f61
Max-Forwards: 70
Pwd: 12
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "null"
Registrar, processRegister(), key is null 400 INVALID REQUEST replied
PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 32b3caa82ac228651ba504e7d36ed8be@192.168.1.4
CSeq: 1 REGISTER
From: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>;tag=12674827
To: "KLOUP" <sip:tt@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.4:5060;branch=z9hG4bK988f0b390dedb821b319bf41b6753f61
Max-Forwards: 70
Pwd: 12
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.4:5060;transport=udp>
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:tt@192.168.1.2:4000

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 628b0cff90f7e9203266bebda22a9e4a@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:nou@192.168.1.2:4000;transport=udp>;tag=21478430
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK3a4fdd781052a4736b3dca2e0cf2d5e8
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 22

SIGNUP nou:::1:Premium
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 3d8b7e139a749688525bcc933136c41a@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:nou@192.168.1.2:4000;transport=udp>;tag=21478430
To: "KLOUP" <sip:nou@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK93e9b14755a374d3258ad012a63caa20
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:nou@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:nou@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), An old timer has  been stopped for the contact: sip:192.168.1.2:5060
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.2:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:nou@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:nou@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: 3d8b7e139a749688525bcc933136c41a@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:nou@192.168.1.2:4000;transport=udp>;tag=21478430
To: "KLOUP" <sip:nou@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK93e9b14755a374d3258ad012a63caa20
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 3d8b7e139a749688525bcc933136c41a@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:nou@192.168.1.2:4000;transport=udp>;tag=21478430
To: "KLOUP" <sip:nou@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK93e9b14755a374d3258ad012a63caa20
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:nou@192.168.1.2:4000

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 3d8b7e139a749688525bcc933136c41a@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:nou@192.168.1.2:4000;transport=udp>;tag=21478430
To: "KLOUP" <sip:nou@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK9f9add2fd9c2340db1b1ed1655a828cf
Max-Forwards: 70
Pwd: 1
Expires: 0
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:nou@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:nou@192.168.1.2:4000" : registered
RegistrationsTable, updateRegistration(), registration updated for the key: sip:nou@192.168.1.2:4000
RegistrationsTable, removeContact(),  contact removed for the key: sip:nou@192.168.1.2:4000
DEBUG, Registration, removeContactHeader(): The contact: sip:192.168.1.2:5060 has been removed for the key: sip:nou@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:nou@192.168.1.2:4000"
- contacts: 

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

RegistrationsTable, removeContact(), the registration: sip:nou@192.168.1.2:4000 does not contain any contacts, we remove it
RegistrationsTable, removeRegistration(),  registration removed for the key: sip:nou@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:0
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: 3d8b7e139a749688525bcc933136c41a@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:nou@192.168.1.2:4000;transport=udp>;tag=21478430
To: "KLOUP" <sip:nou@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK9f9add2fd9c2340db1b1ed1655a828cf
Max-Forwards: 70
Expires: 0
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 3d8b7e139a749688525bcc933136c41a@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:nou@192.168.1.2:4000;transport=udp>;tag=21478430
To: "KLOUP" <sip:nou@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK9f9add2fd9c2340db1b1ed1655a828cf
Max-Forwards: 70
Pwd: 1
Expires: 0
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:nou@192.168.1.2:4000

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 2871f11c854f34d155dca81c751ea3a8@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>;tag=25748743
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK5be7bf62702b768ed3b898741145066f
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 21

SIGNUP yolo:::1:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 2871f11c854f34d155dca81c751ea3a8@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>;tag=25748743
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK5be7bf62702b768ed3b898741145066f
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 21

SIGNUP yolo:::1:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 555bc0ed3a58033aba0246a22ef26ab8@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>;tag=25748743
To: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK5ecabb4ef86951cf0db7345155f2ad8e
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:yolo@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:yolo@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), An old timer has  been stopped for the contact: sip:192.168.1.2:5060
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.2:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:yolo@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:yolo@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: 555bc0ed3a58033aba0246a22ef26ab8@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>;tag=25748743
To: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK5ecabb4ef86951cf0db7345155f2ad8e
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 555bc0ed3a58033aba0246a22ef26ab8@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>;tag=25748743
To: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK5ecabb4ef86951cf0db7345155f2ad8e
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:yolo@192.168.1.2:4000

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 555bc0ed3a58033aba0246a22ef26ab8@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>;tag=25748743
To: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd8cb126088af563188f3bdc64e896d42
Max-Forwards: 70
Pwd: 1
Expires: 0
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:yolo@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:yolo@192.168.1.2:4000" : registered
RegistrationsTable, updateRegistration(), registration updated for the key: sip:yolo@192.168.1.2:4000
RegistrationsTable, removeContact(),  contact removed for the key: sip:yolo@192.168.1.2:4000
DEBUG, Registration, removeContactHeader(): The contact: sip:192.168.1.2:5060 has been removed for the key: sip:yolo@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:yolo@192.168.1.2:4000"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

RegistrationsTable, removeContact(), the registration: sip:yolo@192.168.1.2:4000 does not contain any contacts, we remove it
RegistrationsTable, removeRegistration(),  registration removed for the key: sip:yolo@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:0
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: 555bc0ed3a58033aba0246a22ef26ab8@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>;tag=25748743
To: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd8cb126088af563188f3bdc64e896d42
Max-Forwards: 70
Expires: 0
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: 555bc0ed3a58033aba0246a22ef26ab8@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>;tag=25748743
To: "KLOUP" <sip:yolo@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKd8cb126088af563188f3bdc64e896d42
Max-Forwards: 70
Pwd: 1
Expires: 0
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:yolo@192.168.1.2:4000

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: e5689deb4ad701527682649447d71809@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:12@192.168.1.2:4000;transport=udp>;tag=15100647
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK5003a34d77112827dfd7d4875b725771
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 19

SIGNUP 12:::1:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: dc6f7cced98862cf214c72fcfd83cda6@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:12@192.168.1.2:4000;transport=udp>;tag=15100647
To: "KLOUP" <sip:12@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK10ced925904e64a6884e5bf06363921b
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:12@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:12@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), An old timer has  been stopped for the contact: sip:192.168.1.2:5060
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.2:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:12@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:12@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: dc6f7cced98862cf214c72fcfd83cda6@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:12@192.168.1.2:4000;transport=udp>;tag=15100647
To: "KLOUP" <sip:12@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK10ced925904e64a6884e5bf06363921b
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: dc6f7cced98862cf214c72fcfd83cda6@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:12@192.168.1.2:4000;transport=udp>;tag=15100647
To: "KLOUP" <sip:12@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK10ced925904e64a6884e5bf06363921b
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:12@192.168.1.2:4000

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: dc6f7cced98862cf214c72fcfd83cda6@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:12@192.168.1.2:4000;transport=udp>;tag=15100647
To: "KLOUP" <sip:12@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK3250a060b0be90b9c313e225ccdef646
Max-Forwards: 70
Pwd: 1
Expires: 0
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:12@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:12@192.168.1.2:4000" : registered
RegistrationsTable, updateRegistration(), registration updated for the key: sip:12@192.168.1.2:4000
RegistrationsTable, removeContact(),  contact removed for the key: sip:12@192.168.1.2:4000
DEBUG, Registration, removeContactHeader(): The contact: sip:192.168.1.2:5060 has been removed for the key: sip:12@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:12@192.168.1.2:4000"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

RegistrationsTable, removeContact(), the registration: sip:12@192.168.1.2:4000 does not contain any contacts, we remove it
RegistrationsTable, removeRegistration(),  registration removed for the key: sip:12@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:0
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: dc6f7cced98862cf214c72fcfd83cda6@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:12@192.168.1.2:4000;transport=udp>;tag=15100647
To: "KLOUP" <sip:12@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK3250a060b0be90b9c313e225ccdef646
Max-Forwards: 70
Expires: 0
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: dc6f7cced98862cf214c72fcfd83cda6@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:12@192.168.1.2:4000;transport=udp>;tag=15100647
To: "KLOUP" <sip:12@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK3250a060b0be90b9c313e225ccdef646
Max-Forwards: 70
Pwd: 1
Expires: 0
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:12@192.168.1.2:4000

****************************************************
Request MESSAGE received:
MESSAGE sip:192.168.1.2:4000@192.168.1.2:4000 SIP/2.0
Call-ID: 4493d34fcf894ed0057ea94891505e0f@192.168.1.2
CSeq: 1 MESSAGE
From: "KLOUP" <sip:sdf@192.168.1.2:4000;transport=udp>;tag=25044292
To: <sip:192.168.1.2:4000@192.168.1.2:4000>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bKfa64f03c35d60bdf6597aabd2e8f6c2d
Max-Forwards: 70
Content-Type: text/plain
Event:  presence
Content-Length: 20

SIGNUP sdf:::1:Basic
DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: daefbaf22e57f754917629a59a04c735@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:sdf@192.168.1.2:4000;transport=udp>;tag=25044292
To: "KLOUP" <sip:sdf@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK2066455764c205b848c970e5ce135d40
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:sdf@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:sdf@192.168.1.2:4000" : not registered
Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:3600
RegistrationsTable, startTimer(), An old timer has  been stopped for the contact: sip:192.168.1.2:5060
RegistrationsTable, startTimer(), timer started  for the contact: sip:192.168.1.2:5060 , expiresTime:3600
RegistrationsTable, addRegistration(), registration  added for the key: sip:sdf@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:sdf@192.168.1.2:4000"
- contacts: 
  contact 1 : Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, processRegister(),   we have to check if we have some SUBSCRIBE stored.
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: daefbaf22e57f754917629a59a04c735@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:sdf@192.168.1.2:4000;transport=udp>;tag=25044292
To: "KLOUP" <sip:sdf@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK2066455764c205b848c970e5ce135d40
Max-Forwards: 70
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: daefbaf22e57f754917629a59a04c735@192.168.1.2
CSeq: 1 REGISTER
From: "KLOUP" <sip:sdf@192.168.1.2:4000;transport=udp>;tag=25044292
To: "KLOUP" <sip:sdf@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK2066455764c205b848c970e5ce135d40
Max-Forwards: 70
Pwd: 1
Expires: 3600
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>;expires=3600
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:sdf@192.168.1.2:4000

****************************************************
Request REGISTER received:
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: daefbaf22e57f754917629a59a04c735@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:sdf@192.168.1.2:4000;transport=udp>;tag=25044292
To: "KLOUP" <sip:sdf@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK662d16464c061567c26ce30c64f33597
Max-Forwards: 70
Pwd: 1
Expires: 0
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG TRANSACTION INFO: the transaction is null 
Proxy, processRequest(), we are responsible for the domain... Let's find the contact...
Incoming request Register
Registrar, processRegister(), key: "sip:sdf@192.168.1.2:4000"
RegistrationsTable, hasRegistration(), Checking registration for "sip:sdf@192.168.1.2:4000" : registered
RegistrationsTable, updateRegistration(), registration updated for the key: sip:sdf@192.168.1.2:4000
RegistrationsTable, removeContact(),  contact removed for the key: sip:sdf@192.168.1.2:4000
DEBUG, Registration, removeContactHeader(): The contact: sip:192.168.1.2:5060 has been removed for the key: sip:sdf@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:sdf@192.168.1.2:4000"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

RegistrationsTable, removeContact(), the registration: sip:sdf@192.168.1.2:4000 does not contain any contacts, we remove it
RegistrationsTable, removeRegistration(),  registration removed for the key: sip:sdf@192.168.1.2:4000
*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

*********  Registration record *****************

registered user: "sip:mranga@nist.gov"
- contacts: 

registered user: "sip:deruelle@nist.gov"
- contacts: 

************************************************

Registrar, hasExpiresZero(), the REGISTER has an Expires Header with expires time:0
Registrar, processRegister(), response sent:
SIP/2.0 200 OK
Call-ID: daefbaf22e57f754917629a59a04c735@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:sdf@192.168.1.2:4000;transport=udp>;tag=25044292
To: "KLOUP" <sip:sdf@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK662d16464c061567c26ce30c64f33597
Max-Forwards: 70
Expires: 0
Content-Length: 0

PresenceServer:processRegisterRequest: received a request
REGISTER sip:192.168.1.2:5060;transport=udp SIP/2.0
Call-ID: daefbaf22e57f754917629a59a04c735@192.168.1.2
CSeq: 2 REGISTER
From: "KLOUP" <sip:sdf@192.168.1.2:4000;transport=udp>;tag=25044292
To: "KLOUP" <sip:sdf@192.168.1.2:4000;transport=udp>
Via: SIP/2.0/UDP 192.168.1.2:5060;branch=z9hG4bK662d16464c061567c26ce30c64f33597
Max-Forwards: 70
Pwd: 1
Expires: 0
Contact: "KLOUP" <sip:192.168.1.2:5060;transport=udp>
Content-Length: 0


DEBUG, PresenceServer, getKey(), the key is: sip:sdf@192.168.1.2:4000
RegistrationsTable, removeContact(),  contact removed for the key: sip:sdf@192.168.1.2:4000
ExpiresTask, run(), we  removed the contact: sip:192.168.1.2:5060 for the user: sip:sdf@192.168.1.2:4000
Proxy Clean up

*****************************************************

Stopping the proxy
Proxy stopped

*****************************************************

